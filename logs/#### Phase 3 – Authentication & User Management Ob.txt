#### Phase 3 â€“ Authentication & User Management Objectives

1. **Secure Login/Logout**  
   - Email/username + password  
   - Duplicate-login prevention  
   - Auto-logout after 5 minutes of inactivity

2. **Admin Console CRUD**  
   - Departments  
   - Designations  
   - Users (including `phone_number`; unique `email`/`username`)

3. **Password & Recovery Flows**  
   - Forgot-password (email token)  
   - Reset-password  
   - Change-password in profile

4. **UI Preferences & Theming**  
   - Light-theme variants (blue, green, pink, etc)  
   - One standard dark theme 
   - Stored in `ui_preferences.theme`
   - lets have a standard one, sidebar, header, and footer and content at the center. with phome-first design first

6. **Navigation Tabs**  
   - **Users** â€¢ **Departments** â€¢ **Designations**  
   - **My Profile** â€¢ **Themes** â€¢ **Layouts**

---

#### Phase 3 Deliverables

- **Migrations**: `users` (add `phone_number`), `departments`, `designations`, `ui_preferences`, `password_resets`.  
- **Models**: `App\Models\User`, `Department`, `Designation`, `UIPreference`, `PasswordReset`.  
- **Controllers**: `AuthController`, `UserController`, `DepartmentController`, `DesignationController`, `ProfileController`.  
- **Middleware**: `Auth` (route guard, duplicate-login, inactivity timeout).  
- **Helpers**: `SessionHelper` (`start`, `get`, `set`, `destroy`, `checkActivity`).  
- **Views**:  
  - `auth/login.php`, `auth/forgot_password.php`, `auth/reset_password.php`  
  - `users/index.php`, `users/form.php`  
  - `departments/*`, `designations/*`  
  - `profile.php`, `themes.php`, `layouts.php`  
- **Layout & Navigation**: Updated `header.php`/`sidebar.php` to include the new tabs + responsive mobile collapse.  
- **CSS**: Variables for light-theme variants, standard dark theme, and layout-specific styles.  

kinde_erp/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ Controllers/
â”‚   â”‚   â”œâ”€â”€ AuthController.php
â”‚   â”‚   â”œâ”€â”€ UserController.php
â”‚   â”‚   â”œâ”€â”€ DepartmentController.php
â”‚   â”‚   â”œâ”€â”€ DesignationController.php
â”‚   â”‚   â”œâ”€â”€ ProfileController.php
â”‚   â”‚   â””â”€â”€ ThemeController.php
â”‚   â”œâ”€â”€ Core/
â”‚   â”‚   â”œâ”€â”€ App.php
â”‚   â”‚   â”œâ”€â”€ Controller.php
â”‚   â”‚   â”œâ”€â”€ Middleware.php
â”‚   â”‚   â”œâ”€â”€ Router.php
â”‚   â”‚   â”œâ”€â”€ View.php
â”‚   â”‚   â””â”€â”€ SessionHelper.php âœ… (NEW)
â”‚   â”œâ”€â”€ Middleware/
â”‚   â”‚   â”œâ”€â”€ Auth.php
â”‚   â”‚   â”œâ”€â”€ PreventDuplicateLogin.php
â”‚   â”‚   â””â”€â”€ InactivityLogout.php
â”‚   â”œâ”€â”€ Models/
â”‚   â”‚   â”œâ”€â”€ User.php
â”‚   â”‚   â”œâ”€â”€ Department.php
â”‚   â”‚   â”œâ”€â”€ Designation.php
â”‚   â”‚   â”œâ”€â”€ UIPreference.php
â”‚   â”‚   â””â”€â”€ PasswordReset.php
â”‚   â””â”€â”€ Views/
â”‚       â”œâ”€â”€ auth/
â”‚       â”‚   â”œâ”€â”€ login.php
â”‚       â”‚   â”œâ”€â”€ forgot_password.php
â”‚       â”‚   â””â”€â”€ reset_password.php
â”‚       â”œâ”€â”€ users/
â”‚       â”‚   â”œâ”€â”€ index.php
â”‚       â”‚   â””â”€â”€ form.php
â”‚       â”œâ”€â”€ departments/
â”‚       â”‚   â”œâ”€â”€ index.php
â”‚       â”‚   â””â”€â”€ form.php
â”‚       â”œâ”€â”€ designations/
â”‚       â”‚   â”œâ”€â”€ index.php
â”‚       â”‚   â””â”€â”€ form.php
â”‚       â”œâ”€â”€ profile/
â”‚       â”‚   â””â”€â”€ index.php
â”‚       â”œâ”€â”€ themes/
â”‚       â”‚   â””â”€â”€ index.php
â”‚       â”œâ”€â”€ layouts/
â”‚       â”‚   â””â”€â”€ main.php
â”‚       â”œâ”€â”€ partials/
â”‚       â”‚   â”œâ”€â”€ header.php
â”‚       â”‚   â”œâ”€â”€ sidebar.php âœ… (NEW)
â”‚       â”‚   â””â”€â”€ footer.php
â”‚       â””â”€â”€ home.php
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ config.php
â”‚   â””â”€â”€ database.php
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ migrations/ âœ… (NEW)
â”‚   â”‚   â”œâ”€â”€ create_users_table.php
â”‚   â”‚   â”œâ”€â”€ create_departments_table.php
â”‚   â”‚   â”œâ”€â”€ create_designations_table.php
â”‚   â”‚   â”œâ”€â”€ create_ui_preferences_table.php
â”‚   â”‚   â””â”€â”€ create_password_resets_table.php
â”‚   â””â”€â”€ seeds/ âœ… (optional later)
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ phase1-log.md 
â”‚   â”œâ”€â”€ phase2-log.md 
â”‚   â””â”€â”€ phase3-log.md âœ… (NEW)
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”‚   â”œâ”€â”€ style.css
â”‚   â”‚   â”‚   â””â”€â”€ themes.css âœ… (NEW)
â”‚   â”‚   â””â”€â”€ js/
â”‚   â”‚       â””â”€â”€ main.js
â”‚   â”œâ”€â”€ .htaccess
â”‚   â””â”€â”€ index.php
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ web.php âœ… (NEW)
â”œâ”€â”€ storage/
â”‚   â”œâ”€â”€ cache/
â”‚   â””â”€â”€ logs/
â”œâ”€â”€ tests/
â”œâ”€â”€ vendor/
â”œâ”€â”€ .env
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .gitignore-tracker.txt
â”œâ”€â”€ .gitignored_files.md
â”œâ”€â”€ composer.json
â”œâ”€â”€ env.php
â””â”€â”€ README.md

| Step | Task Description                        | Status         | Notes |
| ---- | --------------------------------------- | -------------- | ----- |
| 1    | Create login page and form              | âœ… Completed   |       |
| 2    | Submit login form to controller         | âœ… Completed   |       |
| 3    | Validate credentials and login logic    | âœ… Completed   |       |
| 4    | Redirect on success/failure             | âœ… Completed   |       |
| 5    | Implement session helper (auth)         | âœ… Completed   |       |
| 6    | Create protected `/home` route          | âœ… Completed   |       |
| 7    | Create View & Layout class              | âœ… Completed   |       |
| 8    | Display home page with welcome + logout | âœ… Completed   |       |
| 9    | Logout route and logic                  | ðŸ”„ In Progress |       |
| 10   | Flash messaging (e.g., login errors)    | ðŸ”² Pending     |       |
| 11   | General route cleanup & security check  | ðŸ”² Pending     |       |
